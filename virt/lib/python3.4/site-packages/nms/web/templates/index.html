{% extends "base.html" %}
{% block title %} Мониторинг NMS {% endblock %}

{% block scripts %} 
<script language="javascript" type="text/javascript" src="/static/js/nodestate.js"></script>
{% endblock %}

{% block left %}
    <div class="device_menu">
        <div class="device_group">Доступные устройства</div>
        {% for device in devices %}
            <!-- DEVICE -->
            {% if device.leaf %}
                <div class='param_entry'>
                    <div class='dname'>
                        <a class="wide_link" href="/nms/device/{{device.name}}">{{ device.full_name }}
                        </a>
                    </div>
                    <div class='alert_entry'>
                    {% if device.do_have_alerts %} <img width='16px' height='16px' src="/static/img/icons/alert_state.png"> {%endif%}
                    {% if device.is_online %}
                    <img class='alert_online_pic' src="/static/img/icons/online.png">
                    {% else %}
                    <img class='alert_online_pic' src="/static/img/icons/offline.png">
                    {%endif%}
                    </div>

                </div>
            {% else %}
            {% endif %}
        {% endfor %} <!-- devices -->
        <div class="param_entry">
            Легенда: </br>
            <img class='alert_online_pic' src="/static/img/icons/alert_state.png"> - устройство имеет ошибки </br>
            <img class='alert_online_pic' src="/static/img/icons/online.png"> - устройство доступно </br>
            <img class='alert_online_pic' src="/static/img/icons/offline.png"> - устройство недоступно </br>
        </div>
    </div> <!-- device_menu -->
    <script>
    $(".device_group").click(function() {
        $(this).next().toggle( "blind" );
    });
    </script>
{% endblock %}

{% block right %}
    <div class="right">
        <center>
        {% set alerts = current_alerts %} 
        {% set block_type = "current alerts" %}
        {% set block_name = "Текущие аварии и события" %}
        {% include 'common/alert_table.html' %}
        </center>
        {% include 'common/nodestate.html' %}

    </div>
{% endblock %}
