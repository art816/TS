#!/usr/bin/env python3

# This is proprietary software.
# part of cluster monitoring project.
# PEP8 code style used, python version 3
#
# authors: Dmitry Khodakov <dmitryhd@gmail.com>

"""  This module contain tests for Alerts and AlertHandler. """

import unittest

import nms.config as cfg
import nms.core.context as context
import nms.core.power_control as pc

class TestServerPowerControl(unittest.TestCase):
    """ TestServerPowerControl"""

    def test_device_graceful_shutdown(self):
        """ TestServerPowerControl: Power on. """
        local_context = context.ContextCreator('buer').from_file() 
        spm = pc.ServerPowerManager(local_context.general_devices['MonitoringServer'])
        spm.ping()
        spm.ipmi_status()
        self.assertTrue(spm.has_ping)
        self.assertTrue(spm.power_state)
        


if __name__ == '__main__':
    unittest.main()
